---
import { getCollection } from 'astro:content';
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE } from '../../consts';

const docs = await getCollection('docs');
const sortedDocs = docs.sort((a, b) => (a.data.order || 999) - (b.data.order || 999));
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`Documentation - ${SITE_TITLE}`} description="Complete documentation for PCILeech Firmware Generator" />
	</head>
	<body>
		<Header />
		<main>
			<h1>ðŸ“š Documentation</h1>
			<p>Complete documentation for the PCILeech Firmware Generator project.</p>
			
			<div class="docs-grid">
				{sortedDocs.map((doc) => (
					<article class="doc-card">
						<h3>
							<a href={`/docs/${doc.id}`}>{doc.data.title}</a>
						</h3>
						{doc.data.description && (
							<p class="description">{doc.data.description}</p>
						)}
						<div class="meta">
							{doc.data.pubDate && (
								<time datetime={doc.data.pubDate.toISOString()}>
									{doc.data.pubDate.toLocaleDateString()}
								</time>
							)}
						</div>
					</article>
				))}
			</div>
		</main>
		<Footer />
	</body>
</html>

<style>
	.docs-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 1.5rem;
		margin: 2rem 0;
	}
	
	.doc-card {
		background: #f8f9fa;
		border: 1px solid #dee2e6;
		border-radius: 8px;
		padding: 1.5rem;
		transition: all 0.2s ease;
	}
	
	.doc-card:hover {
		border-color: #007bff;
		box-shadow: 0 4px 8px rgba(0, 123, 255, 0.1);
	}
	
	.doc-card h3 {
		margin: 0 0 1rem 0;
	}
	
	.doc-card h3 a {
		color: #495057;
		text-decoration: none;
	}
	
	.doc-card h3 a:hover {
		color: #007bff;
	}
	
	.description {
		color: #6c757d;
		margin: 0 0 1rem 0;
		line-height: 1.5;
	}
	
	.meta {
		color: #6c757d;
		font-size: 0.9em;
	}
</style>
